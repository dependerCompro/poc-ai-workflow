{"ast":null,"code":"import { createVNode as _createVNode, normalizeStyle as _normalizeStyle, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, normalizeClass as _normalizeClass, Fragment as _Fragment, createElementBlock as _createElementBlock } from \"vue\";\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createVNode($setup[\"SideBar\"]), _createVNode($setup[\"VueFlow\"], {\n    nodes: $setup.nodes,\n    edges: $setup.edges,\n    class: _normalizeClass([{\n      dark: $setup.dark\n    }, \"basic-flow\"]),\n    onDrop: $setup.onDrop,\n    onDragover: $setup.onDragOver,\n    onDragleave: $setup.onDragLeave,\n    \"min-zoom\": 0.2,\n    \"max-zoom\": 4\n  }, {\n    \"node-input-prompt\": _withCtx(() => [_createVNode($setup[\"InputPromptNode\"])]),\n    \"node-input-data\": _withCtx(() => [_createVNode($setup[\"InputDataNode\"])]),\n    \"node-processor\": _withCtx(() => [_createVNode($setup[\"ProcessorNode\"])]),\n    \"node-result-output\": _withCtx(() => [_createVNode($setup[\"OutputNode\"])]),\n    default: _withCtx(() => [_createVNode($setup[\"Background\"], {\n      style: _normalizeStyle({\n        backgroundColor: $setup.isDragOver ? '#e7f3ff' : 'transparent',\n        transition: 'background-color 0.2s ease'\n      }),\n      \"pattern-color\": \"#aaa\",\n      gap: 16\n    }, null, 8 /* PROPS */, [\"style\"]), _createVNode($setup[\"MiniMap\"]), _createVNode($setup[\"Controls\"], {\n      position: \"top-right\"\n    }, {\n      default: _withCtx(() => [_createVNode($setup[\"ControlButton\"], {\n        title: \"Reset Transform\",\n        onClick: $setup.resetTransform\n      }, {\n        default: _withCtx(() => [_createVNode($setup[\"Icon\"], {\n          name: \"reset\"\n        })]),\n        _: 1 /* STABLE */\n      }), _createVNode($setup[\"ControlButton\"], {\n        title: \"Toggle Dark Mode\",\n        onClick: $setup.toggleDarkMode\n      }, {\n        default: _withCtx(() => [$setup.dark ? (_openBlock(), _createBlock($setup[\"Icon\"], {\n          key: 0,\n          name: \"sun\"\n        })) : (_openBlock(), _createBlock($setup[\"Icon\"], {\n          key: 1,\n          name: \"moon\"\n        }))]),\n        _: 1 /* STABLE */\n      }), _createVNode($setup[\"ControlButton\"], {\n        title: \"Log `toObject`\",\n        onClick: $setup.logToObject\n      }, {\n        default: _withCtx(() => [_createVNode($setup[\"Icon\"], {\n          name: \"log\"\n        })]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"nodes\", \"edges\", \"class\"])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["_createElementBlock","_Fragment","_createVNode","$setup","nodes","edges","class","_normalizeClass","dark","onDrop","onDragover","onDragOver","onDragleave","onDragLeave","_withCtx","default","style","_normalizeStyle","isDragOver","gap","position","title","onClick","resetTransform","name","_","toggleDarkMode","_createBlock","key","logToObject"],"sources":["D:\\poc-ai-workflow\\src\\App.vue"],"sourcesContent":["<template>\r\n  <SideBar />\r\n  <VueFlow :nodes=\"nodes\" :edges=\"edges\" :class=\"{ dark }\" class=\"basic-flow\" @drop=\"onDrop\" @dragover=\"onDragOver\"\r\n    @dragleave=\"onDragLeave\" :min-zoom=\"0.2\" :max-zoom=\"4\">\r\n    <Background :style=\"{\r\n      backgroundColor: isDragOver ? '#e7f3ff' : 'transparent',\r\n      transition: 'background-color 0.2s ease',\r\n    }\" pattern-color=\"#aaa\" :gap=\"16\" />\r\n\r\n    <MiniMap />\r\n\r\n    <Controls position=\"top-right\">\r\n      <ControlButton title=\"Reset Transform\" @click=\"resetTransform\">\r\n        <Icon name=\"reset\" />\r\n      </ControlButton>\r\n      <ControlButton title=\"Toggle Dark Mode\" @click=\"toggleDarkMode\">\r\n        <Icon v-if=\"dark\" name=\"sun\" />\r\n        <Icon v-else name=\"moon\" />\r\n      </ControlButton>\r\n      <ControlButton title=\"Log `toObject`\" @click=\"logToObject\">\r\n        <Icon name=\"log\" />\r\n      </ControlButton>\r\n    </Controls>\r\n    <template #node-input-prompt>\r\n      <InputPromptNode />\r\n    </template>\r\n    <template #node-input-data>\r\n      <InputDataNode />\r\n    </template>\r\n    <template #node-processor>\r\n      <ProcessorNode />\r\n    </template>\r\n    <template #node-result-output>\r\n      <OutputNode />\r\n    </template>\r\n  </VueFlow>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, watch } from 'vue'\r\nimport { VueFlow, useVueFlow } from '@vue-flow/core'\r\nimport { Background } from '@vue-flow/background'\r\nimport { ControlButton, Controls } from '@vue-flow/controls'\r\nimport { MiniMap } from '@vue-flow/minimap'\r\nimport Icon from './components/ControlIcons.vue'\r\nimport SideBar from './components/SideBar.vue'\r\nimport { useDragAndDropStore } from '@/stores/index.js';\r\nimport InputPromptNode from '@/components/InputPromptNode.vue';\r\nimport InputDataNode from '@/components/InputDataNode.vue';\r\nimport ProcessorNode from '@/components/ProcessorNode.vue';\r\nimport OutputNode from '@/components/OutputNode.vue';\r\n\r\nconst { onNodeDragStop, onConnect, setViewport, toObject, screenToFlowCoordinate, onNodeClick, onPaneClick } = useVueFlow()\r\n\r\nconst dark = ref(false)\r\nconst store = useDragAndDropStore()\r\nconst nodeCount = ref({\r\n  \"input-prompt\": 0,\r\n  \"input-data\": 0,\r\n  \"processor\": 0,\r\n  \"result-output\": 0\r\n})\r\n\r\nconst draggedType = computed(() => store.draggedType)\r\nconst isDragging = computed(() => store.isDragging)\r\nconst isDragOver = computed(() => store.isDragOver)\r\nconst nodes = computed(() => store.nodes)\r\nconst edges = computed(() => store.edges)\r\n\r\nwatch(isDragging, (dragging) => {\r\n  document.body.style.userSelect = dragging ? 'none' : ''\r\n})\r\n\r\nconst toggleDarkMode = () => {\r\n  dark.value = !dark.value\r\n}\r\n\r\nconst resetTransform = () => {\r\n  setViewport({ x: 0, y: 0, zoom: 1 })\r\n}\r\n\r\nconst logToObject = () => {\r\n  console.log(toObject())\r\n}\r\n\r\nconst getNewNodeId = (type) => {\r\n  const timeStamp = Date.now()\r\n  return `${timeStamp}-${type}-${nodeCount.value[type]++}`\r\n}\r\n\r\nconst getNewEdgeId = (src, tgt) => {\r\n  return src + \"___\" + tgt;\r\n}\r\n\r\nconst onDrop = (event) => {\r\n  const position = screenToFlowCoordinate({\r\n    x: event.clientX,\r\n    y: event.clientY,\r\n  })\r\n  const nodeId = getNewNodeId(draggedType.value)\r\n\r\n  const newNode = {\r\n    id: nodeId,\r\n    type: draggedType.value,\r\n    position: position,\r\n    data: { userInput: \"\" },\r\n  }\r\n  nodes.value.push(newNode)\r\n  store.activeNodeId = nodeId;\r\n}\r\n\r\nconst onDragOver = (event) => {\r\n  event.preventDefault()\r\n  if (draggedType.value) {\r\n    store.isDragOver = true\r\n    if (event.dataTransfer) {\r\n      event.dataTransfer.dropEffect = 'move'\r\n    }\r\n  }\r\n}\r\n\r\nconst onDragLeave = () => {\r\n  store.isDragOver = false\r\n}\r\n\r\nonNodeDragStop(({ event, node }) => {\r\n  console.log(\"Node Id: \", event)\r\n  nodes.value.forEach((obj) => {\r\n    if (obj.id == node.id) {\r\n      obj.position.x = event.clientX - 75 - 275;\r\n      obj.position.y = event.clientY - 18;\r\n    }\r\n  })\r\n})\r\n\r\nonConnect((event) => {\r\n  const edgeId = getNewEdgeId(event.source, event.target);\r\n  const newEdge = {\r\n    id: edgeId,\r\n    source: event.source,\r\n    target: event.target,\r\n    animated: true,\r\n  }\r\n  edges.value.push(newEdge);\r\n})\r\n\r\nonNodeClick((event) => {\r\n  store.activeNodeId = event.node.id;\r\n})\r\n\r\nonPaneClick(() => {\r\n  store.activeNodeId = \"\";\r\n})\r\n</script>\r\n\r\n<style>\r\n@import '@vue-flow/core/dist/style.css';\r\n@import '@vue-flow/core/dist/theme-default.css';\r\n@import './main.css';\r\n\r\n#app {\r\n  display: flex;\r\n}\r\n</style>\r\n"],"mappings":";;uBAAAA,mBAAA,CAAAC,SAAA,SACEC,YAAA,CAAWC,MAAA,cACXD,YAAA,CAiCUC,MAAA;IAjCAC,KAAK,EAAED,MAAA,CAAAC,KAAK;IAAGC,KAAK,EAAEF,MAAA,CAAAE,KAAK;IAAGC,KAAK,EAF/CC,eAAA;MAAAC,IAAA,EAEmDL,MAAA,CAAAK;IAAI,GAAU,YAAY;IAAEC,MAAI,EAAEN,MAAA,CAAAM,MAAM;IAAGC,UAAQ,EAAEP,MAAA,CAAAQ,UAAU;IAC7GC,WAAS,EAAET,MAAA,CAAAU,WAAW;IAAG,UAAQ,EAAE,GAAG;IAAG,UAAQ,EAAE;;IAoBzC,mBAAiB,EAAAC,QAAA,CAC1B,MAAmB,CAAnBZ,YAAA,CAAmBC,MAAA,qB;IAEV,iBAAe,EAAAW,QAAA,CACxB,MAAiB,CAAjBZ,YAAA,CAAiBC,MAAA,mB;IAER,gBAAc,EAAAW,QAAA,CACvB,MAAiB,CAAjBZ,YAAA,CAAiBC,MAAA,mB;IAER,oBAAkB,EAAAW,QAAA,CAC3B,MAAc,CAAdZ,YAAA,CAAcC,MAAA,gB;IAjCpBY,OAAA,EAAAD,QAAA,CAII,MAGoC,CAHpCZ,YAAA,CAGoCC,MAAA;MAHvBa,KAAK,EAJtBC,eAAA;yBAIkDd,MAAA,CAAAe,UAAU;;;MAGrD,eAAa,EAAC,MAAM;MAAEC,GAAG,EAAE;wCAE9BjB,YAAA,CAAWC,MAAA,cAEXD,YAAA,CAWWC,MAAA;MAXDiB,QAAQ,EAAC;IAAW;MAXlCL,OAAA,EAAAD,QAAA,CAYM,MAEgB,CAFhBZ,YAAA,CAEgBC,MAAA;QAFDkB,KAAK,EAAC,iBAAiB;QAAEC,OAAK,EAAEnB,MAAA,CAAAoB;;QAZrDR,OAAA,EAAAD,QAAA,CAaQ,MAAqB,CAArBZ,YAAA,CAAqBC,MAAA;UAAfqB,IAAI,EAAC;QAAO,G;QAb1BC,CAAA;UAeMvB,YAAA,CAGgBC,MAAA;QAHDkB,KAAK,EAAC,kBAAkB;QAAEC,OAAK,EAAEnB,MAAA,CAAAuB;;QAftDX,OAAA,EAAAD,QAAA,CAgBQ,MAA+B,CAAnBX,MAAA,CAAAK,IAAI,I,cAAhBmB,YAAA,CAA+BxB,MAAA;UAhBvCyB,GAAA;UAgB0BJ,IAAI,EAAC;6BACvBG,YAAA,CAA2BxB,MAAA;UAjBnCyB,GAAA;UAiBqBJ,IAAI,EAAC;;QAjB1BC,CAAA;UAmBMvB,YAAA,CAEgBC,MAAA;QAFDkB,KAAK,EAAC,gBAAgB;QAAEC,OAAK,EAAEnB,MAAA,CAAA0B;;QAnBpDd,OAAA,EAAAD,QAAA,CAoBQ,MAAmB,CAAnBZ,YAAA,CAAmBC,MAAA;UAAbqB,IAAI,EAAC;QAAK,G;QApBxBC,CAAA;;MAAAA,CAAA;;IAAAA,CAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}